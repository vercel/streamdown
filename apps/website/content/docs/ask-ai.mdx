---
title: Ask AI
description: An AI-powered chat assistant that helps users understand your documentation with context-aware responses
---

The Ask AI feature provides an intelligent chat assistant built directly into your documentation. Users can ask questions about your docs and get instant, context-aware answers powered by AI. The assistant can search through your documentation, understand context, and provide helpful responses.

## How It Works

The AI chat assistant is available in two ways:

### 1. Per-Page Quick Access

Each documentation page has an "Ask AI about this page" button in the table of contents sidebar. When clicked, it:

1. Opens the chat interface
2. Pre-fills a prompt asking the AI to read the current page
3. Allows users to ask specific questions about that page

### 2. Global Chat Interface

Users can open the chat interface at any time by:

- Clicking the "Ask AI" button in the navbar
- Using the keyboard shortcut: `⌘I` (Mac) or `Ctrl+I` (Windows/Linux)

Once open, users can:
- Ask questions about any part of your documentation
- Upload files or images for context
- View AI-powered search results from your docs
- Get step-by-step guidance on complex topics

## Features

### Context-Aware Search

The AI assistant includes a built-in `search_docs` tool that:

1. Searches through your documentation content
2. Finds relevant pages based on the user's question
3. Shows source citations with links to the referenced pages
4. Uses the content to provide accurate, contextual answers

### Persistent Chat History

Conversations are automatically saved to the browser's IndexedDB, providing:

- Chat history that persists across page reloads
- Ability to continue previous conversations
- Option to start a new chat or clear history
- Offline access to past conversations

### Interactive Features

- **Suggestions**: First-time users see suggested questions to get started
- **File Upload**: Users can attach files or images for context
- **Markdown Support**: Responses are formatted with proper Markdown rendering
- **Code Syntax Highlighting**: Code blocks in responses include syntax highlighting
- **Reasoning Display**: In development mode, view the AI's reasoning process

### Mobile-Responsive

The chat interface adapts to different screen sizes:
- **Desktop**: Slides in from the right side as a sidebar panel
- **Mobile**: Opens as a bottom drawer for easy access

## Configuration

The Ask AI feature requires an AI API key to function.

### Environment Variables

```bash title=".env"
AI_GATEWAY_API_KEY="your-api-key"
NEXT_PUBLIC_VERCEL_PROJECT_PRODUCTION_URL="your-domain.com"
```

### Required Environment Variables

- **`AI_GATEWAY_API_KEY`** - Your AI API key (OpenAI or compatible API)
- **`NEXT_PUBLIC_VERCEL_PROJECT_PRODUCTION_URL`** - Your production domain (used for generating page URLs)

### AI Provider Setup

The Ask AI feature is built with the [Vercel AI SDK](https://sdk.vercel.ai/) and supports multiple AI providers:

1. **OpenAI** (default)
2. **Anthropic**
3. **Google AI**
4. **Mistral**
5. Any OpenAI-compatible API

To use a different provider, you'll need to modify the API route configuration.

## Keyboard Shortcuts

The chat interface includes convenient keyboard shortcuts:

- **`⌘I` / `Ctrl+I`** - Toggle chat interface open/closed
- **`Enter`** - Send message
- **`Shift+Enter`** - New line in message

## Customization

### Suggested Questions

You can customize the initial suggested questions shown to users. These are configured in the `Chat` component:

```typescript title="components/geistdocs/chat.tsx"
<Chat suggestions={[
  "How do I get started?",
  "What are the main features?",
  "How do I configure the project?"
]} />
```

### Search Configuration

The AI's document search can be customized by modifying the search implementation in your API route. The search tool uses the Fumadocs content source to find relevant pages.

## Implementation Details

The Ask AI feature is implemented across several components:

- `components/geistdocs/chat.tsx` - Main chat interface
- `components/geistdocs/ask-ai.tsx` - Per-page quick access button
- `hooks/geistdocs/use-chat.tsx` - Chat state management
- `app/api/chat/route.ts` - AI API endpoint with search tool

### IndexedDB Structure

Chat messages are stored in IndexedDB with the following schema:

- **Database**: `ChatMessagesDB`
- **Store**: `messages`
- **Indexes**: `timestamp`, `sequence`

## Best Practices

### 1. Provide Clear Documentation

The AI's responses are only as good as your documentation. Ensure:
- Clear, well-structured content
- Comprehensive coverage of topics
- Examples and code snippets
- Consistent formatting

### 2. Monitor Usage

Keep track of:
- Common questions users ask
- Topics that generate confusion
- Gaps in your documentation
- API usage and costs

### 3. Set Expectations

Consider adding a disclaimer about:
- AI limitations and potential inaccuracies
- Privacy considerations
- Rate limits or usage restrictions

### 4. Optimize Content for Search

Help the AI find relevant content by:
- Using descriptive page titles
- Including keywords naturally
- Adding comprehensive descriptions
- Creating focused, single-topic pages

## Privacy & Security

### Data Handling

- Chat messages are stored locally in the user's browser
- Only the user's messages and relevant documentation excerpts are sent to the AI provider
- No personal data is collected or stored on servers

### API Key Security

- Store your API key securely as a server-side environment variable
- Never expose your API key in client-side code
- Consider implementing rate limiting to prevent abuse
- Monitor your API usage regularly

## Troubleshooting

### Chat interface doesn't appear

- Verify `AI_GATEWAY_API_KEY` is set
- Check browser console for JavaScript errors
- Ensure your API route is properly configured

### Search results are inaccurate

- Improve page descriptions and titles
- Add more comprehensive content
- Use clear heading structures
- Include relevant keywords naturally

### High API costs

- Implement rate limiting
- Set shorter context windows
- Cache common responses
- Consider using a less expensive model for simple queries

### Chat history not persisting

- Check browser console for IndexedDB errors
- Verify browser supports IndexedDB
- Clear browser storage and test again
- Ensure sufficient storage quota available
